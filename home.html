<!DOCTYPE html>
<!--    Copyright 2014 gokoururi
        This work is free. You can redistribute it and/or modify it under the
        terms of the Do What The Fuck You Want To Public License, Version 2,
        as published by Sam Hocevar. See the COPYING file for more details. -->
<html>
    <head>
        <title>Welcome Home</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta charset="utf-8">
        <link rel="icon" href="images/ruri.ico" sizes="16x16 32x32 48x48 64x64" type="image/vnd.microsoft.icon" />

        <link rel="stylesheet" style="text/css" href="general.css" />

        <!-- 3rd party libraries. -->
        <script type="text/javascript" src="js/mustache.js-0.8.1/mustache.js"></script>
        <script type="text/javascript" src="js/jquery-2.1.1.min.js"></script>

        <!-- Page scripts. -->
        <script type="text/javascript" src="config.js"></script>
        <script type="text/javascript" src="js/scripts.js"></script>

        <!-- TODO Check whether using that x-tmpl-mustache "custom MIME" is sane. -->
        <!-- TODO Maybe just put those in places where they should be instantiated and substitute their parent's .html() instead of using data- attribute? -->

        <!-- Title template. -->
        <script type="x-tmpl-mustache" data-target-selector="title">{{title}}</script>

        <!-- Header template. -->
        <script type="x-tmpl-mustache" data-target-selector="header">
            <h1>{{header}}<span class="highlite">{{name}}</span></h1>
            <p class="subtitle">{{subtitle}}</p>
        </script>

        <!-- Searchboxes template. -->
        <script type="x-tmpl-mustache" data-target-selector=".searchContainer">
        {{#links.searchboxes}}
            <form class="searchForm" method="get" action="{{url}}">
                <input
                    type        = "text"
                    class       = "searchBar"
                    style       = "background-image: url('themes/{{theme}}/images/icons/{{icon}}')"
                    name        = "{{parameter}}"
                    placeholder = "{{name}}"
                    {{#autofocus}} autofocus="autofocus"{{/autofocus}}
                />
            </form>
        {{/links.searchboxes}}
        </script>

        <!-- Buttons template. -->
        <script type="x-tmpl-mustache" data-target-selector=".buttonList">
        {{#links.buttons}}
            <li class="button button_{{color}}{{#sublinks.length}} buttonArrow{{/sublinks.length}}">
                <a href="{{url}}">{{name}}</a>
            {{#sublinks.length}}
                <ul>
                    {{#sublinks}}
                    <li><a href="{{url}}">{{name}}</a></li>
                    {{/sublinks}}
                </ul>
            {{/sublinks.length}}
            </li>
        {{/links.buttons}}
        </script>

        <!-- Columns template. -->
        <script type="x-tmpl-mustache" data-target-selector=".columnList">
        {{#links.columns}}
            <li class="column column_{{color}}">
                <a>{{name}}</a>
                <ul>
                {{#items}}
                    <li><a href="{{url}}">{{name}}</a></li>
                {{/items}}
                </ul>
            </li>
        {{/links.columns}}
        </script>
    </head>
    <body>
        <main> <!-- Random mascot image will be set as background-image by javascript -->
            <header></header>
            <section class="searchContainer">
                <!-- Here go templated searchboxes. -->
            </section>
            <nav>
                <ul class="buttonList">
                    <!-- Here go templated buttons. -->
                </ul>
                <ul class="columnList">
                    <!-- Here go templated columns. -->
                </ul>
            </nav>
        </main>
    </body>
</html>

